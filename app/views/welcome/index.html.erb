<div class="container mt-4 bg-black">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="text-white text-center">London</h2>
    <div>
      <%= link_to "Upload New Photo", new_photo_path, class: "btn btn-outline-secondary text-white me-2" %>
      <%# <button class="btn btn-outline-primary text-white">New folder</button> %>
    </div>
  </div>

  <!-- Date picker input, properly placed -->
  <div data-controller="date" class="mb-4">
    <input
      type="text"
      data-date-target="input"
      data-action="change->date#fetchPhotos"
      class="form-control"
      placeholder="Select a date"
    >
  </div>

  <!-- Wrap all photos in one container with id="photos" -->
 
   <!-- Feed container -->
<div id="photos" class="d-flex flex-column gap-4">
  <% @photos.each do |photo| %>
    <% if photo.file.attached? %>
      <div class="card bg-black text-white border-0 rounded-4 shadow-sm overflow-hidden">
        <!-- Photo -->
        <%= image_tag url_for(photo.file), class: "w-100 img-fluid", style: "object-fit: cover;" %>

        <!-- Photo meta -->
        <div class="p-3">
          <h6 class="fw-bold mb-2"><%= photo.title %></h6>
          <small class="text-muted">Posted on <%= photo.created_at.to_date %></small>

          <!-- Like Section -->
          <div class="mt-2 d-flex align-items-center gap-2">
            <% if photo.likes.exists?(user: current_user) %>
              <% like = photo.likes.find_by(user: current_user) %>
              <%= button_to '❤️', photo_like_path(photo, like), method: :delete, class: "btn btn-link p-0 text-white" %>
            <% else %>
              <%= button_to '🤍', photo_likes_path(photo), method: :post, class: "btn btn-link p-0 text-white" %>
            <% end %>
           <%= link_to pluralize(photo.likes.count, 'like'), liked_users_photo_path(photo), class: "text-white" %>
          </div>

          <!-- Comment Form -->
          <div class="mt-3">
            <%= form_with(model: [photo, Comment.new], local: true) do |f| %>
              <div class="input-group">
                <%= f.text_field :content, placeholder: "Add a comment...", class: "form-control bg-dark text-white border-secondary" %>
                <button class="btn btn-outline-secondary" type="submit">Post</button>
              </div>
            <% end %>
          </div>

          <!-- Existing Comments -->
          <div class="mt-2">
          <% photo.comments.each do |comment| %>
            <p class="mb-1">
              <strong>
                <%= link_to comment.user.email, friend_path(comment.user), class: "text-white" %>
              </strong>
              <%= comment.content %>
            </p>
          <% end %>
        </div>

        </div>
      </div>
    <% end %>
  <% end %>
</div>


